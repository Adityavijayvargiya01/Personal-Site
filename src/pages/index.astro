---
import BlogCard from '@/components/BlogCard.astro'
import Link from '@/components/Link.astro'
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'
import { getAllPosts, groupPostsByYear } from '@/lib/data-utils'

const allPosts = await getAllPosts()
const postsByYear = groupPostsByYear(allPosts)
const years = Object.keys(postsByYear).sort((a, b) => parseInt(b) - parseInt(a))
---

<Layout>
  <PageHead slot="head" title="Home" />
  <section
    class="page-animate animate-fade-in-soft min-h-[calc(89vh)] flex items-center"
    data-stagger-index="0"
    transition:name="main"
  >
    <div class="transition-smooth hover-shadow">
      <div class="flex flex-col space-y-1.5 p-6">
        <h3 class="text-3xl leading-none font-medium">Aditya Vijayvargiya</h3>
        <p class="text-muted-foreground text-lg">Software Developer Intern @Philips</p>
      </div>
      <div class="p-6 pt-0">
        <p class="text-muted-foreground mb-5 text-base">
          Hello there, I'm a software developer from India. I'm currently
          pursuing a B.Tech in Computer Science. In my journey of software
          development, I have developed a strong foundation in programming and
          software development, with particular experience in <Link
            href="https://nextjs.org"
            class="text-foreground"
            external
            underline>Next.js</Link
          > and <Link
            href="https://react.dev"
            class="text-foreground"
            external
            underline>React</Link
          >.
        </p>
        <p class="text-muted-foreground mb-5 text-base">
          One of my favorite hobbies continues to be tinkering with software
          configurations, whether it's customizing Neovim setups, tweaking UI
          elements that don't quite feel right, or hunting for the perfect
          open-source alternative.
        </p>
        <p class="text-muted-foreground text-base">
          I also love staying updated with the latest tech trends and sharing
          insights with others through blogs and Twitter posts.
        </p>
      </div>
    </div>
  </section>
  <section
    id="posts"
    class="page-animate flex flex-col gap-y-1"
    data-stagger-index="2"
  >
    <h2
      class="mb-2 text-2xl font-medium"
      data-scroll
      data-scroll-animation="fade-in-soft"
    >
      Posts
    </h2>
    <div class="flex flex-col gap-y-8">
      {
        years.map((year, yIndex) => (
          <section
            class="page-animate flex flex-col gap-y-4"
            data-stagger-index={yIndex + 3}
          >
            <div class="font-medium">{year}</div>
            <ul class="flex flex-col gap-4">
              {postsByYear[year].map((post, pIndex) => (
                <li
                  class="page-animate"
                  data-stagger-index={yIndex + pIndex + 4}
                >
                  <BlogCard entry={post} />
                </li>
              ))}
            </ul>
          </section>
        ))
      }
    </div>
  </section>
</Layout>
