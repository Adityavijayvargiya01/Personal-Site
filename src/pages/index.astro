---
import BlogCard from '@/components/BlogCard.astro'
import PageHead from '@/components/PageHead.astro'
import Layout from '@/layouts/Layout.astro'
import Link from '@/components/Link.astro'
import { getAllPosts, groupPostsByYear } from '@/lib/data-utils'

const allPosts = await getAllPosts()
const postsByYear = groupPostsByYear(allPosts)
const years = Object.keys(postsByYear).sort((a, b) => parseInt(b) - parseInt(a))
---

<Layout>
  <PageHead slot="head" title="Home" />
  <section class="page-animate" data-stagger-index="0">
    <div class="rounded-lg border hover-lift transition-smooth">
      <div class="flex flex-col space-y-1.5 p-6">
        <h3 class="text-3xl leading-none font-medium">Aditya Vijayvargiya</h3>
        <p class="text-muted-foreground text-sm">
          Software Developer
        </p>
      </div>      <div class="p-6 pt-0">
        <p class="text-muted-foreground mb-2 text-sm">
          Hello there, I'm a software developer from India. I'm currently pursuing a B.Tech in Computer Science. In my journey of software development, I have developed a strong foundation in programming and software development, with particular experience in <Link
            href="https://nextjs.org"
            class="text-foreground"
            external
            underline>Next.js</Link
          > and <Link
            href="https://react.dev"
            class="text-foreground"
            external
            underline>React</Link
          >.
        </p>
        <p class="text-muted-foreground mb-2 text-sm">
          One of my favorite hobbies continues to be tinkering with software configurations, whether it's customizing Neovim setups, tweaking UI elements that don't quite feel right, or hunting for the perfect open-source alternative.
        </p>
        <p class="text-muted-foreground text-sm">
          I also love staying updated with the latest tech trends and sharing insights with others through blogs and Twitter posts.
        </p>
      </div>
    </div>
  </section>
  <section id="posts" class="flex flex-col gap-y-6 page-animate" data-stagger-index="1">
    <h2 class="text-2xl font-medium">Blogs</h2>
    <div class="flex flex-col gap-y-8">
      {
        years.map((year, yIndex) => (
          <section class="flex flex-col gap-y-4 page-animate" data-stagger-index={yIndex + 2}>
            <div class="font-medium">{year}</div>
            <ul class="flex flex-col gap-4">
              {postsByYear[year].map((post, pIndex) => (
                <li class="page-animate" data-stagger-index={yIndex + pIndex + 3}>
                  <BlogCard entry={post} />
                </li>
              ))}
            </ul>
          </section>
        ))
      }
    </div>
  </section>
</Layout>
